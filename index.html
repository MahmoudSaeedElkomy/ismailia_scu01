<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÙˆØ§Ø­Ø© Ø§Ù„Ø¹Ù„Ù…: Ø¬Ø§Ù…Ø¹Ø© Ù‚Ù†Ø§Ø© Ø§Ù„Ø³ÙˆÙŠØ³</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.8.49/Tone.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Desert Sands & Papyrus with inviting accents -->
    <!-- Application Structure Plan: A multi-scene interactive narrative for marketing. Starts with a hero section, then proceeds through sequential story scenes. Each scene has text, emoji, dynamically changing background colors, and subtle ambient sounds (Tone.js). LLM integration includes an "Inspirational Question" for scene reflection and a "Personalized Welcome Message" at the end of the story. A final call to action section. Controls for background music/ambient sounds. -->
    <style>
        body {
            font-family: 'Cairo', sans-serif;
            background-color: #FDF8F0;
            color: #4E4234;
            transition: background-color 1.5s ease-in-out; /* Smooth transition for background changes */
        }
        .bg-primary { background-color: #FDF8F0; }
        .bg-secondary { background-color: #F5EFE1; }
        .text-primary { color: #4E4234; }
        .text-accent { color: #8D6B4C; }
        .bg-accent { background-color: #D4A056; }
        .bg-accent-hover:hover { background-color: #C08C3B; }
        .shadow-custom { 
            box-shadow: 0 10px 30px -5px rgba(141, 107, 76, 0.15), 0 6px 12px -6px rgba(141, 107, 76, 0.1); 
        }
        .text-shadow-light {
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.1);
        }
        .loading-spinner {
            border: 4px solid rgba(0, 0, 0, 0.1);
            border-left-color: #D4A056;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            animation: spin 1s linear infinite;
            display: inline-block;
            vertical-align: middle;
            margin-right: 8px;
        }
        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }
        .mood-ancient { background-color: #D2B48C; } /* Tan/Desert color */
        .mood-oasis-birth { background-color: #A2D9CE; } /* Light teal/greenish blue */
        .mood-strategic { background-color: #ECC8AF; } /* Light peach/gold */
        .mood-transformation { background-color: #ADD8E6; } /* Light blue */
        .mood-resilience { background-color: #FFDAB9; } /* Peach puff / warm tone */
        .mood-academic { background-color: #F0E68C; } /* Khaki / light yellow */

        /* Animations for visual dazzle */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fadeIn {
            animation: fadeIn 0.6s ease-out forwards;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        .animate-pulse-once {
            animation: pulse 1s ease-in-out;
        }
    </style>
</head>
<body class="bg-primary">
    <nav class="sticky top-0 z-50 bg-primary/80 backdrop-blur-md shadow-sm">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <div class="flex items-center">
                    <span class="text-2xl font-bold text-accent text-shadow-light">ÙˆØ§Ø­Ø© Ø§Ù„Ø¹Ù„Ù…</span>
                </div>
                <div class="hidden md:block">
                    <div class="ml-10 flex items-baseline space-x-4 space-x-reverse">
                        <a href="#story-container" class="text-primary hover:text-accent px-3 py-2 rounded-md text-sm font-medium">Ø§Ù„Ù‚ØµØ©</a>
                        <a href="#student-benefits" class="text-primary hover:text-accent px-3 py-2 rounded-md text-sm font-medium">Ù„Ù„Ø·Ù„Ø§Ø¨ Ø§Ù„ÙˆØ§ÙØ¯ÙŠÙ†</a>
                        <a href="#call-to-action" class="text-primary hover:text-accent px-3 py-2 rounded-md text-sm font-medium">Ø§Ù†Ø¶Ù… Ø¥Ù„ÙŠÙ†Ø§</a>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <main>
        <section id="story-container" class="min-h-screen flex flex-col items-center justify-center p-4 py-16 transition-colors duration-1000 ease-in-out mood-ancient">
            <div class="max-w-4xl w-full bg-secondary p-8 rounded-xl shadow-custom text-center">
                <h1 id="story-title" class="text-4xl md:text-5xl font-bold text-accent leading-tight mb-6 text-shadow-light"></h1>
                <p id="story-text" class="mt-6 text-lg md:text-xl text-primary leading-relaxed"></p>
                <div class="mt-6 text-5xl">
                    <span id="story-icon"></span>
                </div>

                <div id="ai-response-area" class="mt-6 p-4 bg-primary rounded-lg shadow-inner text-primary hidden">
                    <div class="loading-spinner hidden"></div>
                    <p id="ai-response-text" class="leading-relaxed"></p>
                </div>
                
                <div class="mt-8 flex flex-col sm:flex-row items-center justify-center gap-4">
                    <button id="prev-scene-btn" class="bg-accent text-white font-bold py-3 px-8 rounded-full text-lg bg-accent-hover transition-all duration-300 transform hover:scale-105 opacity-50 cursor-not-allowed">
                        Ø§Ù„Ù…Ø´Ù‡Ø¯ Ø§Ù„Ø³Ø§Ø¨Ù‚
                    </button>
                    <button id="next-scene-btn" class="bg-accent text-white font-bold py-3 px-8 rounded-full text-lg bg-accent-hover transition-all duration-300 transform hover:scale-105">
                        Ø§Ù„Ù…Ø´Ù‡Ø¯ Ø§Ù„ØªØ§Ù„ÙŠ
                    </button>
                </div>
                <div class="mt-4 flex flex-col sm:flex-row items-center justify-center gap-4">
                    <span class="text-primary"><span id="current-scene-indicator">1</span> / <span id="total-scenes-indicator"></span></span>
                    <button id="read-text-btn" class="bg-accent text-white font-bold py-2 px-6 rounded-full text-sm bg-accent-hover transition-all duration-300">
                        Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ù†Øµ ğŸ”Š
                    </button>
                </div>
                <div class="mt-6">
                    <button id="inspire-me-btn" class="bg-accent text-white font-bold py-2 px-6 rounded-full text-sm bg-accent-hover transition-all duration-300">
                        ØªØ³Ø§Ø¤Ù„ Ø¥Ù„Ù‡Ø§Ù…ÙŠ âœ¨
                    </button>
                </div>
            </div>
        </section>

        <section id="student-benefits" class="py-20 bg-primary">
            <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
                <h2 class="text-3xl font-bold text-accent mb-8 text-shadow-light">Ù„Ù…Ø§Ø°Ø§ ØªØ®ØªØ§Ø± ÙˆØ§Ø­ØªÙ†Ø§ØŸ</h2>
                <p class="text-lg text-primary max-w-2xl mx-auto mb-10">ÙÙŠ Ø¬Ø§Ù…Ø¹Ø© Ù‚Ù†Ø§Ø© Ø§Ù„Ø³ÙˆÙŠØ³ØŒ Ù†Ø­Ù† Ù†Ø¯Ø±Ùƒ Ø£Ù† Ø±Ø­Ù„ØªÙƒ Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠØ© ØªØªØ¬Ø§ÙˆØ² Ø§Ù„ÙØµÙˆÙ„ Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠØ©. Ù‡Ù†Ø§ØŒ Ø³ØªØ¬Ø¯ Ø¨ÙŠØ¦Ø©Ù‹ ØªØ­ØªØ¶Ù†ÙÙƒÙ ÙˆØªÙÙˆÙØ±Ù Ù„ÙƒÙ ÙƒÙ„Ù‘Ù Ù…Ø§ ØªØ­ØªØ§Ø¬ÙÙ‡Ù Ù„ÙØªØ²Ø¯Ù‡Ø±Ù Ø¥Ù†Ø³Ø§Ù†ÙŠØ§Ù‹ ÙˆØ£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ§Ù‹.</p>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                    <div class="bg-secondary p-6 rounded-xl shadow-custom transform hover:-translate-y-2 transition-transform duration-300">
                        <span class="text-5xl mb-4 block">ğŸ’–</span>
                        <h3 class="text-xl font-bold text-accent mb-2">Ø§Ù„Ø´Ø¹ÙˆØ± Ø¨Ø§Ù„Ø§Ù†ØªÙ…Ø§Ø¡</h3>
                        <p class="text-primary">Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ø£Ø³Ø±ØªÙ†Ø§! Ù…Ø¬ØªÙ…Ø¹Ù†Ø§ Ø§Ù„Ø¯Ø§ÙØ¦ ÙˆØ§Ù„ÙˆØ¯ÙˆØ¯ ÙŠØ¬Ø¹Ù„Ùƒ ØªØ´Ø¹Ø± ÙˆÙƒØ£Ù†Ùƒ ÙÙŠ Ø¨ÙŠØªÙƒØŒ Ø¨Ø¹ÙŠØ¯Ø§Ù‹ Ø¹Ù† Ø§Ù„ØºØ±Ø¨Ø©.</p>
                    </div>
                    <div class="bg-secondary p-6 rounded-xl shadow-custom transform hover:-translate-y-2 transition-transform duration-300">
                        <span class="text-5xl mb-4 block">ğŸ›¡ï¸</span>
                        <h3 class="text-xl font-bold text-accent mb-2">Ø§Ù„Ø£Ù…Ø§Ù† ÙˆØ§Ù„Ø·Ù…Ø£Ù†ÙŠÙ†Ø©</h3>
                        <p class="text-primary">Ù†Ø­Ù† Ù†Ø¹Ø¯Ùƒ Ø¨Ø¨ÙŠØ¦Ø© Ø¢Ù…Ù†Ø© ÙˆÙ…Ø³ØªÙ‚Ø±Ø©ØŒ Ø­ÙŠØ« ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„ØªØ±ÙƒÙŠØ² Ø¹Ù„Ù‰ Ø¯Ø±Ø§Ø³ØªÙƒ ÙˆØªØ¬Ø§Ø±Ø¨Ùƒ Ø¯ÙˆÙ† Ù‚Ù„Ù‚.</p>
                    </div>
                    <div class="bg-secondary p-6 rounded-xl shadow-custom transform hover:-translate-y-2 transition-transform duration-300">
                        <span class="text-5xl mb-4 block">ğŸ˜Š</span>
                        <h3 class="text-xl font-bold text-accent mb-2">Ø§Ù„ØªØ±Ø­ÙŠØ¨ ÙˆØ§Ù„Ø¶ÙŠØ§ÙØ©</h3>
                        <p class="text-primary">Ù…Ø¯ÙŠÙ†ØªÙ†Ø§ ÙˆØ¬Ø§Ù…Ø¹ØªÙ†Ø§ ØªØ¹Ø±ÙØ§Ù† ÙƒÙŠÙ ØªØ¨ØªØ³Ù…Ø§Ù† ÙˆØªØ³ØªÙ‚Ø¨Ù„Ø§Ù† Ø§Ù„Ø²ÙˆØ§Ø±. Ø´Ø¹Ø§Ø±Ù†Ø§: "Ø§Ø¨ØªØ³Ù….. Ø£Ù†Øª ÙÙŠ Ø­Ø¶Ø±ØªÙŠ!".</p>
                    </div>
                </div>
                <div class="mt-10">
                    <button id="get-welcome-message-btn" class="bg-accent text-white font-bold py-3 px-8 rounded-full text-lg bg-accent-hover transition-all duration-300 transform hover:scale-105">
                        Ø§Ø­ØµÙ„ Ø¹Ù„Ù‰ Ø±Ø³Ø§Ù„Ø© ØªØ±Ø­ÙŠØ¨ Ù…Ø®ØµØµØ© âœ¨
                    </button>
                    <div id="welcome-message-output" class="mt-6 p-4 bg-secondary rounded-lg shadow-inner text-primary hidden">
                        <div class="loading-spinner hidden"></div>
                        <p></p>
                    </div>
                </div>
            </div>
        </section>

        <section id="call-to-action" class="py-20 bg-secondary text-center">
            <div class="max-w-3xl mx-auto px-4">
                <h2 class="text-3xl font-bold text-accent mb-6 text-shadow-light">Ù‚ØµØªÙƒ ØªØ¨Ø¯Ø£ Ù‡Ù†Ø§!</h2>
                <p class="text-lg text-primary mb-8">Ø¬Ø§Ù…Ø¹Ø© Ù‚Ù†Ø§Ø© Ø§Ù„Ø³ÙˆÙŠØ³ Ù„ÙŠØ³Øª Ù…Ø¬Ø±Ø¯ Ù…ÙƒØ§Ù† Ù„Ù„Ø¯Ø±Ø§Ø³Ø©ØŒ Ø¥Ù†Ù‡Ø§ ÙˆØ§Ø­ØªÙƒ Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© Ø§Ù„ØªÙŠ Ø³ØªÙ†Ù…Ùˆ ÙÙŠÙ‡Ø§ ÙˆØªØ²Ø¯Ù‡Ø±. Ø§Ù†Ø¶Ù… Ø¥Ù„Ù‰ Ø¹Ø§Ø¦Ù„ØªÙ†Ø§!</p>
                <a href="#" class="bg-accent text-white font-bold py-3 px-8 rounded-full text-lg bg-accent-hover transition-all duration-300 transform hover:scale-105">
                    Ø§ÙƒØªØ´Ù Ø¨Ø±Ø§Ù…Ø¬Ù†Ø§ ÙˆØ³Ø¬Ù„ Ø§Ù„Ø¢Ù†
                </a>
            </div>
        </section>
    </main>

    <footer class="bg-primary">
        <div class="max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8 text-center text-primary">
            <p>&copy; 2025 ÙˆØ§Ø­Ø© Ø§Ù„Ø¹Ù„Ù…: Ø¬Ø§Ù…Ø¹Ø© Ù‚Ù†Ø§Ø© Ø§Ù„Ø³ÙˆÙŠØ³. Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©.</p>
        </div>
    </footer>

    <div class="fixed bottom-4 left-4 bg-secondary p-3 rounded-full shadow-lg flex items-center space-x-2 z-50">
        <button id="toggle-music" class="text-accent text-xl focus:outline-none">
            ğŸ¶
        </button>
        <button id="toggle-ambient-sound" class="text-accent text-xl focus:outline-none">
            ğŸƒ
        </button>
    </div>

    <script>
        const storyScenes = [
            {
                title: "Ù…ÙÙ†Ù’ Ø±ÙØ­ÙÙ…Ù Ø§Ù„ØªØ§Ø±ÙŠØ®Ù ÙˆÙÙ„ÙØ¯ÙØªÙ’ Ù‡ÙÙˆÙŠÙÙ‘ØªÙÙŠ!",
                text: "Ø£Ù†Ø§ Ø§Ù„ØªÙŠ ÙˆÙÙ„ÙØ¯Ù’ØªÙ Ù‡Ù†Ø§Ø› Ø¹Ù„Ù‰ Ù‡Ø°Ù‡ Ø§Ù„Ø£Ø±Ø¶Ù. ÙˆÙ„ÙÙŠÙ Ø¹Ø¯ÙŠØ¯ÙŒ Ù…Ù† Ø§Ù„Ø£Ø³Ù…Ø§Ø¡Ù.",
                icon: "â³",
                mood: "mood-ancient"
            },
            {
                title: "ÙˆØ§Ø­Ø©ÙŒ Ù…Ù† Ø±Ù…Ø§Ù„Ù ÙˆÙ…Ø§Ø¡Ù",
                text: "ÙÙŠ ØºØ§Ø¨Ø± Ø§Ù„ØªØ§Ø±ÙŠØ®ØŒ ÙˆÙÙŠ Ù„Ø­Ø¸Ø©Ù Ù…Ø§ØŒ ØªÙ„Ø§Ù‚Øª Ù…ÙŠØ§Ù‡ Ø§Ù„Ù†ÙŠÙ„ Ù…Ø¹ Ø¨Ø­ÙŠØ±Ø©Ù Ù…ÙØ±ÙÙ‘Ø©. ÙØªØ´Ø¨Ø¹Øª Ø±ÙÙ…Ø§Ù„ÙÙŠÙ Ø§Ù„ØµÙØ±Ø§Ø¡ Ù…ÙØ§ÙØ¡Ù‹ Ù…Ø§Ù„Ø­Ù‹Ø§ Ø¹Ø°Ø¨Ù‹Ø§! Ø«Ù… ÙØ§Ø¶ÙØªÙ’ ØªÙØ±Ù’Ø¨ÙØªÙÙŠ Ù…ÙÙ†Ù Ø§Ù„Ø«ÙÙ…ÙØ±Ø§ØªÙ Ø£ÙØ´Ù’Ø¬ÙØ§Ø±Ù‹Ø§ØŒ ÙˆØ§Ø³ØªØ­Ø§Ù„Øª Ø§Ù„Ø£Ø±Ø¶ÙØ› Ø¨Ø§ØªØ­Ø§Ø¯ Ø§Ù„Ø£Ø´Ø¬Ø§Ø±Ù Ø§Ù„Ù…Ø«Ù…Ø±Ø§ØªØŒ Ù…Ø¹ Ù…Ø§ Ø¹Ø¯Ø§Ù‡Ø§ Ù…Ù† Ø´Ø¬Ø±Ù ÙƒØ«ÙŠÙÙØŒ Ø¥Ù„Ù‰ Ù…Ø§ ÙŠØ´Ø¨Ù‡ Ø§Ù„ÙˆØ§Ø­Ø©! ÙƒØ§Ù† Ù…ÙˆÙ‚Ø¹Ù Ù‚Ø¯Ù…ÙŠÙÙ‘ Ù…ÙØ°Ù‡Ù„Ù‹Ø§! ÙƒÙÙ†ØªÙ ÙÙŠ Ø§Ù„Ù…Ù„ØªÙ‚Ù‰ ØªÙ…Ø§Ù…Ù‹Ø§ØŒ Ø¨ÙŠÙ† Ø£Ø±Ø¶ Ø§Ù„Ø´Ø§Ù… ÙˆØ£Ø±Ø¶ Ù…ØµØ±! Ø¹Ù„Ù‰ Ø§Ù„Ø­Ø¯ÙˆØ¯ Ù…Ù† Ø³ÙŠÙ†Ø§Ø¡ Ø§Ù„Ù…Ø¨Ø§Ø±ÙƒØ©!",
                icon: "ğŸŒŠğŸŒ³",
                mood: "mood-oasis-birth"
            },
            {
                title: "Ø¨ÙˆØ§Ø¨Ø©Ù Ø§Ù„Ø­Ø¶Ø§Ø±Ø§ØªÙ ÙˆÙ…Ù„ØªÙ‚Ù‰ Ø§Ù„ØªØ¬Ø§Ø±Ø©Ù",
                text: "ÙƒÙÙ†ØªÙ ÙƒØ§Ù„Ø¨ÙˆØ§Ø¨Ø©Ù Ø§Ù„ØªÙŠ ÙŠÙÙ…ÙØ±ÙÙ‘ Ù…Ù†Ù‡Ø§ Ù‚Ø§ØµØ¯Ù Ù‡Ø°Ù‡ Ø§Ù„Ø¨Ù„Ø§Ø¯ØŒ Ø£Ùˆ ØªÙ„Ùƒ! ÙˆÙƒØ°Ù„ÙƒØ› Ù„Ùˆ Ù†ÙØ¸ÙØ±Ù’ØªÙ Ù‡Ù†Ø§ÙƒØŒ ÙˆØ£Ù…Ø¹Ù†ØªÙ Ø§Ù„Ù†ÙØ¸ÙØ±Ù’Ø› Ù„ÙÙˆÙØ¬ÙØ¯Ù’ØªÙÙ†ÙÙŠ ÙÙŠ Ù…ÙÙ†Ù’ØªÙØµÙÙÙ Ø·ÙØ±ÙŠÙ‚Ù ØªØ¬Ø§Ø±Ø©ÙØ› Ù…Ø§ Ø¨ÙŠÙ† Ø¨ÙØ­Ù’Ø±ÙÙŠÙ†ÙØ› Ø¨Ù„ÙÙˆÙ†ÙÙŠÙ†ÙØŒ Ø£Ø­Ù…Ø±Ù ÙˆØ£Ø¨ÙŠØ¶Ù! ÙƒØ§Ù† Ù…ÙˆÙ‚ÙØ¹ÙÙŠ Ù…Ø«Ø§Ù„ÙŠÙ‹Ø§! ÙÙŠ Ø§Ù„ÙˆØ§Ù‚Ø¹Ø› ÙƒØ§Ù† Ø¹Ø¨Ù‚Ø±ÙŠÙ‹Ø§! Ø£Ù†Ø§ ØµØ­Ø±Ø§Ø¡Ù Ù…Ù† Ø¬Ù‡Ø§ØªÙŠ Ø§Ù„Ø£Ø±Ø¨Ø¹! ÙˆÙÙŠ Ø§Ù„Ù…Ù†ØªØµÙ ØªÙ…Ø§Ù…Ù‹Ø§ØŒ Ø£Ù†Ø§ ÙˆØ§Ø­Ø©Ù Ù„Ù„Ø±Ø§Ø­Ø©! ÙƒÙ… Ø§Ø³ØªÙ‚Ù’Ø¨ÙÙ„Ù’ØªÙ Ù…ÙØ§Ø±Ù‹Ù‘Ø§ Ù…Ù† Ù‡Ù†Ø§! Ù…ÙØªÙÙ‘Ø¬ÙØ±Ù‹Ø§ ÙƒØ§Ù†Ø› Ø£Ùˆ Ø¹Ø§Ø¨Ø±Ù Ø³Ø¨ÙŠÙ„ÙØŸ ÙƒÙ… Ù…Ù† Ù…Ù„ÙˆÙƒ Ø§Ù„Ø£Ø±Ø¶Ù Ù…Ø±ÙÙ‘ÙˆØ§ Ù…Ù† Ù‡Ù†Ø§Ø› ØºØ§Ø²ÙŠÙ†ÙØŒ Ø£Ùˆ ÙØ§ØªØ­ÙŠÙ†ÙØŸ ÙƒÙ… Ù…Ù† Ø§Ù„ØµØ§Ù„Ø­ÙŠÙ†Ù! Ø£Ù†Ø§ Ù‡Ù†Ø§ Ù…Ù†Ø° Ø£ØµØ¨Ø­ Ø§Ù„ØªØ§Ø±ÙŠØ® ØµÙØ¨Ø­Ù‹Ø§. ÙˆÙ‡ÙÙˆÙŠÙÙ‘ØªÙÙŠ Ù‡ÙŠ Ø§Ù„Ø£Ø±Ø¶Ù. Ø£Ù†Ø§ ÙˆØ§Ø­Ø©! ÙˆÙ„ÙÙŠÙ Ø¹Ø¯ÙŠØ¯ÙŒ Ù…Ù† Ø§Ù„Ø£Ø³Ù…Ø§Ø¡Ù.",
                icon: "ğŸ—ºï¸ğŸ•Œ",
                mood: "mood-strategic"
            },
            {
                title: "ØªØºÙŠØ±Ø§ØªÙ Ø§Ù„Ø¹ØµØ±Ù ÙˆÙ‚Ù†Ø§Ø©Ù Ø§Ù„Ø³ÙˆÙŠØ³Ù",
                text: "ÙÙŠ Ø¹ØµØ±ÙƒÙ… Ù‡Ø°Ø§! Ø¯Ø¹Ø§Ù†ÙŠ Ù…ÙÙ„ÙÙƒÙ‹Ø§ Ù…Ù† Ù…Ù„ÙˆÙƒÙ Ù…ØµØ± Ø¨Ø§Ø³Ù…Ù‡. ÙˆÙØ§Ø­ÙØªÙÙ‡ÙØ› ÙŠÙ‚ØµØ¯! ÙˆÙ…Ù†Ø° Ø£Ù† Ø¯Ø¹Ø§Ù†ÙŠ Ø¨Ø§Ø³Ù…Ù‡Ø› Ø£ØµØ¨ÙØ­ØªÙ ÙˆØ§Ø­Ø©Ù ÙƒÙÙ„ÙÙ‘ Ù…ÙÙ†Ù’ Ù…ÙÙ„ÙÙƒÙ Ø¨ÙØ¹Ù’Ø¯ÙÙ‡Ù. Ø¥Ù„Ø§ Ø£Ù†Ù‡ Ù‚Ø¯ Ø·ÙØ±ÙØ£ÙÙ†ÙÙŠ Ø¨Ø¹Ø¶ Ø§Ù„ØªØºÙŠØ±! Ø¥Ø° Ø­Ø¬Ø²Øª Ù‚Ù†Ø§Ø©ÙØ› Ø´ÙÙ‚ÙÙ‘ØªÙ’ Ù…Ø§ Ø¨ÙŠÙ† Ø¨ÙØ­Ù’Ø±ÙÙŠÙ†ÙØŒ Ø¥Ù„Ù‰ Ø¥Ø®ØªÙ„Ø§ÙÙ ÙÙŠ Ø·Ø¨ÙŠØ¹ØªÙÙŠÙ. Ù„Ù… Ø£Ø¹ÙØ¯ Ø£Ø±Ù‰ Ø³ÙŠÙ†Ø§Ø¡ Ø§Ù„Ø­Ø¨ÙŠØ¨Ø© ÙƒÙ…Ø§ Ø§Ø¹ØªØ¯Ù’Øª Ø£Ù† Ø£Ø±Ø§Ù‡Ø§ Ø³Ø§Ø¨Ù‚Ù‹Ø§! Ø­ØªÙ‰ Ù‚ÙˆØ§ÙÙ„ Ø§Ù„ØªØ¬Ø§Ø± Ø§Ù„ØªÙŠ ÙƒØ§Ù†Øª ÙƒØ«ÙŠØ±Ù‹Ø§ Ù…Ø§ ØªØ³ØªØ±ÙŠØ­Ù ØªØ­ØªÙ Ø£Ø´Ø¬Ø§Ø±ÙŠØ› Ø§Ø³ØªØ¨Ø¯Ù„ØªÙ’ Ø³ÙÙŠÙ†Ø© Ø§Ù„ØµØ­Ø±Ø§Ø¡ Ø¨Ø³ÙÙŠÙ†Ø©Ù Ø£Ø®Ø±Ù‰ ØªØ­Ù…Ù„Ù Ø¨Ø¶Ø§Ø¦Ø¹ÙÙ‡Ù… Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø§Ø¡! Ù„ÙƒÙ†ÙŠ ÙƒÙ†Øª Ù‚Ø¯ Ø¨Ø¯Ø£Øª Ø£Ø³ØªØ­ÙŠÙ„ Ø¨Ø§Ù„ÙØ¹Ù„ Ø¥Ù„Ù‰ Ù…Ø¯ÙŠÙ†Ø©ÙØŒ ÙˆÙ‚Ø¯ Ø§Ø³ØªÙ‚Ø± Ø§Ù„Ù…ÙÙ‚Ø§Ù… Ø¨Ø¨Ø¹Ø¶ Ù…Ù† Ø§Ù„Ø£ØºØ±Ø§Ø¨ØŒ Ø¨ÙŠØ¶Ù Ø§Ù„ÙˆØ¬ÙˆÙ‡ Ø´Ù‚Ø±Ù‹Ø§ØŒ ÙÙŠ Ø±Ø­Ø§Ø¨ÙŠ. ÙŠØ¯ÙŠØ±ÙˆÙ† Ø´Ø¦ÙˆÙ† Ø§Ù„Ù‚Ù†Ø§Ø©Ù Ø§Ù„ØªÙŠ Ø´ÙÙ‚ÙÙ‘Øª Ø¹Ù„Ù‰ ÙˆØ¬Ù‡ÙŠ! ÙˆØ§Ù†Ø¶Ù… Ø¨Ø¹Ø¶ Ø£Ù‡Ù„ Ù…ØµØ± Ù…Ù† Ø§Ù„Ø²ÙØ±ÙÙ‘Ø§Ø¹Ù ÙŠÙÙ„Ø­ÙˆÙ† ØªÙØ±Ø¨ÙØªÙŠØ› ÙˆÙ„Ù„Ø¹Ø¬Ø¨ÙØŒ Ø£Ù†ØªØ¬Øª Ø£Ø±Ø¶ÙŠ Ø£Ø´Ù‡Ù‰ Ø§Ù„ÙØ§ÙƒÙ‡Ø© ÙˆØ£Ø®Ø±Ø¬Øª Ø¨Ø­ÙŠØ±Ø§ØªÙŠ Ø£Ø´Ù‡Ø± Ø§Ù„Ø£Ø³Ù…Ø§Ùƒ!",
                icon: "ğŸš¢ğŸ™ï¸",
                mood: "mood-transformation"
            },
            {
                title: "Ø§Ù„ØªØ±Ø­ÙŠØ¨Ù ÙˆØ§Ù„ØµÙ…ÙˆØ¯Ù: Ù‡ÙÙˆÙŠÙÙ‘ØªÙÙŠ",
                text: "ÙƒÙ… Ø£Ø­Ø¨ÙÙ‘ Ù‡ÙÙˆÙŠÙÙ‘ØªÙÙŠ! Ø£Ù†Ø§ Ø¯ÙˆÙ…Ù‹Ø§ Ù…ÙØ±ÙØ­ÙØ¨Ù‡. Ø£Ø­Ø¨ Ø§Ù„Ø§Ø¨ØªØ³Ø§Ù…. Ø­ØªÙ‰ Ø¥Ù† Ø´Ø¹Ø§Ø±ÙŠ Ø§Ù„Ø°ÙŠ Ø§Ø³ØªÙ‚Ø¨Ù„ Ø¨Ù‡ Ø§Ù„Ø²ÙˆØ§Ø± ÙŠØ¨Ø¯Ø£ Ø¨Ù‡. Ø§Ø¨ØªØ³Ù….. Ø£Ù†Øª ÙÙŠ Ø­Ø¶Ø±ØªÙŠ! Ø«Ù… Ø¹Ø§Ù†ÙŠØªÙ ÙˆÙŠÙ„Ø§Øª Ø§Ù„Ø­Ø±ÙˆØ¨Ø› Ù„ÙƒÙ†ÙŠ ØµÙ…Ø¯Øª! Ø¨Ù„ Ø£Ù†ÙŠ Ø£Ø°ÙƒØ± Ù„Ø­Ø¸Ø© Ø¹Ø¨ÙˆØ±Ù ÙƒØªØ§Ø¦Ø¨ Ø§Ù„Ø¥ÙŠÙ…Ø§Ù†ØŒ ØªØ³ØªØ±Ø¯ Ù„Ø¹ÙŠÙ†ÙŠØŒ Ø³ÙŠÙ†Ø§Ø¡ Ø§Ù„Ø­Ø¨ÙŠØ¨Ø©! Ù„Ø­Ø¸Ø© Ø¯Ø­Ø±Ù†Ø§ Ø§Ù„Ù…Ø¹ØªØ¯ÙŠ Ø§Ù„ØºØ§Ø²ÙŠ.",
                icon: "ğŸ˜ŠğŸ›¡ï¸",
                mood: "mood-resilience"
            },
            {
                title: "Ø¬Ø§Ù…Ø¹Ø©Ù Ù‚Ù†Ø§Ø©Ù Ø§Ù„Ø³ÙˆÙŠØ³: Ù…Ù†Ø§Ø±Ø©Ù Ø§Ù„Ø¹Ù„Ù…Ù",
                text: "Ù…Ù† Ø¨Ø¹Ø¯Ù‡Ø§Ø› Ø¨Ø¯Ø£ Ø§Ù„Ø¨Ù†Ø§Ø¡ Ø¹Ù„Ù‰ Ù†ØµØ±Ù Ø£ØªÙ‰. ÙÙ†Ø¨ØªØª Ø¨Ø£Ø­Ø´Ø§Ø¦ÙŠ Ù…Ù†Ø§Ø±Ø© Ø§Ù„Ø¹Ù„Ù… Ø§Ù„ØªÙŠØŒ Ø£ÙØ®Ø± Ø¨Ù‡Ø§ØŒ ÙˆÙ…Ø§ ØªØºØ±Ø³Ù‡ Ù…Ù† ÙˆØ¹ÙŠ! Ø£Ù‚Ø¯Ù… Ø¥Ù„ÙŠÙƒÙ…Ø› Ø¬Ø§Ù…Ø¹Ø© Ù‚Ù†Ø§Ø© Ø§Ù„Ø³ÙˆÙŠØ³! Ù…Ù†Ø§Ø±Ø© Ø§Ù„Ø¹Ù„Ù….",
                icon: "ğŸ“ğŸ’¡",
                mood: "mood-academic"
            }
        ];

        let currentSceneIndex = 0;
        const storyContainer = document.getElementById('story-container');
        const storyTitle = document.getElementById('story-title');
        const storyText = document.getElementById('story-text');
        const storyIcon = document.getElementById('story-icon');
        const prevSceneBtn = document.getElementById('prev-scene-btn');
        const nextSceneBtn = document.getElementById('next-scene-btn');
        const readTextBtn = document.getElementById('read-text-btn'); // New button element
        const currentSceneIndicator = document.getElementById('current-scene-indicator');
        const totalScenesIndicator = document.getElementById('total-scenes-indicator');
        const inspireMeBtn = document.getElementById('inspire-me-btn');
        const aiResponseArea = document.getElementById('ai-response-area');
        const aiResponseText = document.getElementById('ai-response-text');
        const loadingSpinner = aiResponseArea.querySelector('.loading-spinner');
        const getWelcomeMessageBtn = document.getElementById('get-welcome-message-btn');
        const welcomeMessageOutput = document.getElementById('welcome-message-output');
        const welcomeMessageText = welcomeMessageOutput.querySelector('p');
        const welcomeMessageSpinner = welcomeMessageOutput.querySelector('.loading-spinner');

        let currentUtterance = null; // To store the SpeechSynthesisUtterance object

        // Tone.js setup for background music
        let backgroundSynth = new Tone.PolySynth(Tone.Synth, {
            oscillator: { type: "sine" }, // Smooth sine wave for ambient music
            envelope: { attack: 3, decay: 1, sustain: 0.7, release: 5 }
        }).toDestination();
        backgroundSynth.volume.value = -18;

        let musicLoop;
        let isMusicPlaying = false;

        function startMusic() {
            if (!musicLoop) {
                const chords = [
                    ["C4", "E4", "G4"], // C Major
                    ["F4", "A4", "C5"], // F Major
                    ["G4", "B4", "D5"], // G Major
                    ["A3", "C4", "E4"]  // A minor (lower octave for harmony)
                ];
                let chordIndex = 0;
                musicLoop = new Tone.Loop(time => {
                    backgroundSynth.triggerAttackRelease(chords[chordIndex % chords.length], "4n", time); // Longer notes
                    chordIndex++;
                }, "2n").start(0); // Play a chord every 2 beats
            }
            Tone.Transport.start();
            isMusicPlaying = true;
            document.getElementById('toggle-music').textContent = 'ğŸ¶';
        }

        function stopMusic() {
            Tone.Transport.stop();
            Tone.Transport.cancel();
            backgroundSynth.releaseAll();
            musicLoop = null;
            isMusicPlaying = false;
            document.getElementById('toggle-music').textContent = 'ğŸ”‡';
        }

        document.getElementById('toggle-music').addEventListener('click', async () => {
            await Tone.start();
            if (isMusicPlaying) {
                stopMusic();
            } else {
                startMusic();
            }
        });

        // Tone.js setup for ambient sound
        let ambientSynth = new Tone.NoiseSynth({
            envelope: {
                attack: 0.05,
                decay: 0.5,
                sustain: 0.5,
                release: 1
            }
        }).toDestination();
        ambientSynth.volume.value = -30; // Very low volume for ambient
        let ambientNoiseLoop;
        let isAmbientSoundPlaying = false;

        function startAmbientSound(type = 'wind') {
            if (!ambientNoiseLoop) {
                ambientNoiseLoop = new Tone.Loop(time => {
                    if (type === 'wind') {
                        ambientSynth.triggerAttackRelease("4n", time, Math.random() * 0.2 + 0.8); // Subtle wind
                    } else if (type === 'water') {
                        ambientSynth.triggerAttackRelease("8n", time, Math.random() * 0.1 + 0.9); // Water ripples
                    } else if (type === 'city') {
                        ambientSynth.triggerAttackRelease("16n", time, Math.random() * 0.05 + 0.95); // Very faint city hum
                    } else if (type === 'birds') {
                         ambientSynth.triggerAttackRelease("16n", time, Math.random() * 0.1 + 0.9);
                    }
                }, "1n").start(0); // Trigger a sound every beat
            }
            Tone.Transport.start();
            isAmbientSoundPlaying = true;
            document.getElementById('toggle-ambient-sound').textContent = 'ğŸƒ';
        }

        function stopAmbientSound() {
            Tone.Transport.stop();
            Tone.Transport.cancel();
            // NoiseSynth does not have `releaseAll` or `triggerRelease` for stopping continuous sound
            // A simple way to stop it is to disconnect it.
            // However, a better approach for continuous ambient sounds is to just stop the loop.
            if (ambientNoiseLoop) {
                ambientNoiseLoop.stop();
                ambientNoiseLoop = null;
            }
            isAmbientSoundPlaying = false;
            document.getElementById('toggle-ambient-sound').textContent = 'ğŸ”‡';
        }

        document.getElementById('toggle-ambient-sound').addEventListener('click', async () => {
            await Tone.start();
            if (isAmbientSoundPlaying) {
                stopAmbientSound();
            } else {
                // Default to wind if no specific type is passed
                startAmbientSound('wind');
            }
        });

        // Function to update the scene content and mood
        function updateScene() {
            const scene = storyScenes[currentSceneIndex];
            storyContainer.classList.remove(...Array.from(storyContainer.classList).filter(c => c.startsWith('mood-')));
            storyContainer.classList.add(scene.mood);

            storyTitle.textContent = scene.title;
            storyText.textContent = scene.text;
            storyIcon.textContent = scene.icon;
            storyIcon.classList.add('animate-pulse-once'); // Add pulse animation when scene updates
            storyIcon.addEventListener('animationend', () => {
                storyIcon.classList.remove('animate-pulse-once'); // Remove animation class after it ends
            }, { once: true });


            // Update navigation buttons
            prevSceneBtn.disabled = currentSceneIndex === 0;
            prevSceneBtn.classList.toggle('opacity-50', currentSceneIndex === 0);
            prevSceneBtn.classList.toggle('cursor-not-allowed', currentSceneIndex === 0);

            nextSceneBtn.disabled = currentSceneIndex === storyScenes.length - 1;
            nextSceneBtn.classList.toggle('opacity-50', currentSceneIndex === storyScenes.length - 1);
            nextSceneBtn.classList.toggle('cursor-not-allowed', currentSceneIndex === storyScenes.length - 1);

            currentSceneIndicator.textContent = currentSceneIndex + 1;
            totalScenesIndicator.textContent = storyScenes.length;

            // Hide AI response area when scene changes
            aiResponseArea.classList.add('hidden');
            aiResponseText.textContent = '';
            welcomeMessageOutput.classList.add('hidden'); // Hide welcome message if visible
            welcomeMessageText.textContent = '';

            // Stop any ongoing speech when scene changes
            if (window.speechSynthesis.speaking) {
                window.speechSynthesis.cancel();
            }

            // Stop current ambient sound and potentially start a new one based on mood
            if (isAmbientSoundPlaying) {
                stopAmbientSound(); // Stop existing loop first
            }

            // Start new ambient sound based on the scene's mood/content
            if (scene.mood === 'mood-oasis-birth') {
                startAmbientSound('water'); // Gentle water sounds for oasis birth
            } else if (scene.mood === 'mood-strategic') {
                startAmbientSound('wind'); // Wind sounds for trade routes
            } else if (scene.mood === 'mood-transformation') {
                startAmbientSound('city'); // Subtle city hum for modernization
            } else {
                // If no specific ambient sound for this mood, ensure it's stopped.
                stopAmbientSound(); 
            }
        }

        prevSceneBtn.addEventListener('click', () => {
            if (currentSceneIndex > 0) {
                currentSceneIndex--;
                updateScene();
            }
        });

        nextSceneBtn.addEventListener('click', () => {
            if (currentSceneIndex < storyScenes.length - 1) {
                currentSceneIndex++;
                updateScene();
            }
        });

        // Text-to-Speech functionality
        readTextBtn.addEventListener('click', () => {
            if ('speechSynthesis' in window) {
                if (window.speechSynthesis.speaking) {
                    window.speechSynthesis.cancel(); // Stop current speech
                } else {
                    const textToSpeak = storyText.textContent;
                    currentUtterance = new SpeechSynthesisUtterance(textToSpeak);
                    currentUtterance.lang = 'ar-SA'; // Set language to Arabic (Saudi Arabia)
                    
                    // Attempt to find a suitable female voice
                    const voices = window.speechSynthesis.getVoices();
                    let femaleVoice = voices.find(voice => 
                        voice.lang.startsWith('ar') && (voice.name.includes('female') || voice.name.includes('Female') || voice.name.includes('Ar-') || voice.name.includes('Arabic'))
                    );

                    // Fallback to any female voice if specific Arabic female voice not found
                    if (!femaleVoice) {
                        femaleVoice = voices.find(voice => voice.gender === 'female' || voice.name.includes('female') || voice.name.includes('Female'));
                    }

                    // Fallback to any Arabic voice if no female voice found
                    if (!femaleVoice) {
                        femaleVoice = voices.find(voice => voice.lang.startsWith('ar'));
                    }

                    // Assign the found voice, or let browser pick default if none found
                    if (femaleVoice) {
                        currentUtterance.voice = femaleVoice;
                    }

                    window.speechSynthesis.speak(currentUtterance);
                }
            } else {
                alert('Ø¹Ø°Ø±Ø§Ù‹ØŒ Ù…ØªØµÙØ­Ùƒ Ù„Ø§ ÙŠØ¯Ø¹Ù… Ø®Ø§ØµÙŠØ© Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ù†Øµ.');
            }
        });


        // Gemini API calls
        async function callGeminiAPI(prompt, outputElement, spinnerElement) {
            outputElement.classList.remove('hidden');
            outputElement.classList.remove('animate-fadeIn'); // Reset animation
            outputElement.querySelector('p').textContent = '';
            spinnerElement.classList.remove('hidden');

            const apiKey = "AIzaSyBt3W-fHQ-PPQBTPNlvKrC-XdVt_hz97QI"; 
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

            let chatHistory = [{ role: "user", parts: [{ text: prompt }] }];
            const payload = { contents: chatHistory };

            try {
                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });
                const result = await response.json();
                if (result.candidates && result.candidates.length > 0 &&
                    result.candidates[0].content && result.candidates[0].content.parts &&
                    result.candidates[0].content.parts.length > 0) {
                    outputElement.querySelector('p').textContent = result.candidates[0].content.parts[0].text;
                    outputElement.classList.add('animate-fadeIn'); // Apply fade-in after content is loaded
                } else {
                    outputElement.querySelector('p').textContent = 'ØªØ¹Ø°Ø± ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ø±Ø¯. Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.';
                }
            } catch (error) {
                console.error('Error calling Gemini API:', error);
                outputElement.querySelector('p').textContent = 'Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ù†Ù…ÙˆØ°Ø¬. Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.';
            } finally {
                spinnerElement.classList.add('hidden');
            }
        }

        inspireMeBtn.addEventListener('click', () => {
            const currentStoryText = storyScenes[currentSceneIndex].text;
            const prompt = `Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ù‡Ø°Ø§ Ø§Ù„Ø¬Ø²Ø¡ Ù…Ù† Ù‚ØµØ© Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©: "${currentStoryText}"ØŒ Ø§Ø³ØªØ®Ø±Ø¬ Ø³Ø¤Ø§Ù„Ø§Ù‹ ØªØ£Ù…Ù„ÙŠØ§Ù‹ Ø¹Ù…ÙŠÙ‚Ø§Ù‹ ÙŠÙ„Ù‡Ù… Ø§Ù„Ø·Ù„Ø§Ø¨ Ø§Ù„ÙˆØ§ÙØ¯ÙŠÙ† Ù„Ù„ØªÙÙƒÙŠØ± ÙÙŠ Ø§Ù„Ø¹Ù„Ø§Ù‚Ø© Ø¨ÙŠÙ† Ø§Ù„ØªØ§Ø±ÙŠØ®ØŒ Ø§Ù„Ù‡ÙˆÙŠØ©ØŒ ÙˆØ¯ÙˆØ±Ù‡Ù… ÙƒØ¬Ø²Ø¡ Ù…Ù† Ù‡Ø°Ù‡ Ø§Ù„Ù‚ØµØ©. Ø§Ø¬Ø¹Ù„ Ø§Ù„Ø³Ø¤Ø§Ù„ Ø¨Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© Ø§Ù„ÙØµØ­Ù‰ ÙˆÙ…Ø¨Ø§Ø´Ø±Ø©.`;
            callGeminiAPI(prompt, aiResponseArea, loadingSpinner);
        });

        getWelcomeMessageBtn.addEventListener('click', () => {
            const prompt = `Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„Ø© ØªØ±Ø­ÙŠØ¨ÙŠØ© Ù‚ØµÙŠØ±Ø© ÙˆÙ…ÙÙ„Ù‡Ù…Ø© Ù„Ø·Ø§Ù„Ø¨ ÙˆØ§ÙØ¯ Ø¬Ø¯ÙŠØ¯ ÙÙŠ Ø¬Ø§Ù…Ø¹Ø© Ù‚Ù†Ø§Ø© Ø§Ù„Ø³ÙˆÙŠØ³ØŒ Ù…Ø³ØªÙ„Ù‡Ù…Ø§Ù‹ Ù…Ù† Ø±ÙˆØ­ Ù‚ØµØ© Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© (Ø§Ù„Ø¥Ø³Ù…Ø§Ø¹ÙŠÙ„ÙŠØ©) Ø§Ù„ØªÙŠ ØªØªÙ…ÙŠØ² Ø¨Ø§Ù„ØªØ±Ø­ÙŠØ¨ØŒ Ø§Ù„Ø£Ù…Ø§Ù†ØŒ Ø§Ù„ØªØ§Ø±ÙŠØ®ØŒ ÙˆØ§Ù„Ø¹Ù„Ù… (Ù…Ù†Ø§Ø±Ø© Ø§Ù„Ø¹Ù„Ù…)ØŒ ÙˆÙƒÙŠÙ ÙŠÙ…ÙƒÙ† Ù„Ù„Ø·Ø§Ù„Ø¨ Ø£Ù† ÙŠØ¬Ø¯ ÙÙŠÙ‡Ø§ Ø§Ù„Ø§Ù†ØªÙ…Ø§Ø¡ ÙˆØ§Ù„Ù†Ù…Ùˆ. Ø±ÙƒØ² Ø¹Ù„Ù‰ Ø§Ù„Ø¬ÙˆØ§Ù†Ø¨ Ø§Ù„Ø¥Ù†Ø³Ø§Ù†ÙŠØ© ÙˆØ§Ù„Ø¹ÙˆØ§Ø·Ù. Ø§Ø¬Ø¹Ù„ Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø¨Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© Ø§Ù„ÙØµØ­Ù‰ Ø§Ù„ÙØµØ­Ù‰ ÙˆØ¨Ø£Ø³Ù„ÙˆØ¨ Ø¯Ø§ÙØ¦ ÙˆÙ…Ø¨Ø§Ø´Ø±.`;
            callGeminiAPI(prompt, welcomeMessageOutput, welcomeMessageSpinner);
        });


        // Initial setup
        window.onload = function() {
            updateScene();
            // Start background music by default, user can toggle off
            startMusic(); 
            // Smooth scroll for nav links
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    document.querySelector(this.getAttribute('href')).scrollIntoView({
                        behavior: 'smooth'
                    });
                });
            });
             // Ensure voices are loaded before trying to set them
            window.speechSynthesis.onvoiceschanged = () => {
                // You might re-run updateScene if you want to ensure the voice is set immediately on load
                // or just ensure the readTextBtn works correctly after voices are loaded.
            };
        };
    </script>
</body>
</html>
